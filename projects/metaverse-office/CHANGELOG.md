# 更新日志

## [3.0.0] - 2026-02-15

### 🎯 重大更新 - Agent协作协议版

**核心理念转变**：从"人类管理平台"到"Agent协作协议平台"

---

### ✨ 新功能

#### 1. 四房布局
- **南房（前）** - 市场部：市场专员Agent
- **东厢房（右）** - 方案部：方案专家 + 研发专家
- **西厢房（左）** - 交付部：研发专家 + 交付运维专家
- **北房（后）** - 管理中心：项目管家 + 财务专家 + 院长助理

#### 2. Agent能力档案
- 专业能力雷达图（多领域能力值）
- 协作特征（响应时间、质量评分、任务偏好）
- 置信度阈值（自动执行/协商/上报的边界）

#### 3. 能力匹配算法
- 基于任务需求的智能Agent匹配
- 考虑能力值、协作特征、负载均衡
- 返回最优匹配 + 备选方案

#### 4. 协作契约机制
- 契约发起与协商
- 多轮对话记录
- 共识达成验证
- 执行追踪

#### 5. 可视化组件
- **协作契约卡片** - 悬浮在庭院中央，显示协商状态
- **协商对话气泡** - Agent上方显示最近3轮对话
- **任务委托飞行** - 任务卡片从委托方飞向受托方
- **推理链回放** - 时间轴展示完整决策过程
- **决策中心** - 北房大屏，显示待办决策

#### 6. 人类介入机制
- 自动识别需要人类判断的场景
- 决策面板展示Agent分析和选项
- 支持决策理由记录

---

### 🏗️ 技术架构

#### 新增组件
- `ContractVisualization.tsx` - 协作契约可视化
- `NegotiationBubbles.tsx` - 协商对话气泡
- `TaskDelegationFlow.tsx` - 任务委托飞行动画
- `ReasoningChainPlayer.tsx` - 推理链回放
- `DecisionCenter.tsx` - 决策中心

#### 新增服务
- `matchingService.ts` - 能力匹配算法
- `contractService.ts` - 协作契约服务

#### 新增类型
- `AgentCapability` - Agent能力档案
- `CollaborationContract` - 协作契约
- `HumanInterventionRequest` - 人类介入请求
- `TaskRequirements` - 任务需求

---

### 📊 统计数据

- 新增文件：15个
- 修改文件：4个
- 总代码行数：5000+
- Git提交：6次

---

### 🔗 相关文档

- [部署文档](./docs/DEPLOY.md)
- [产品需求文档 v3.0](https://feishu.cn/docx/C06cd2f3DoLgK6xL9Xxce7p2nOf)

---

## [2.0.0] - 2026-02-12

### 初始版本

- 中式四合院3D场景
- 7个AI Agent卡通形象
- 基础数据看板
- OpenClaw Gateway集成框架
- WebSocket实时通信

---

## 版本对比

| 特性 | v2.0 | v3.0 |
|------|------|------|
| 布局 | 5层大楼 | 四合院四房 |
| 协作模式 | 人工指派 | Agent自主协商 |
| 决策机制 | 层层审批 | 共识+例外上报 |
| 可视化 | 状态监控 | 协作推理链 |
| 人类角色 | 审批者 | 价值设定者 |

---

**v3.0 - 全新的Agent协作范式！** 🚀
